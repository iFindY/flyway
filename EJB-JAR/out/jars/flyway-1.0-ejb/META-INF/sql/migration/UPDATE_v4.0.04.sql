-- PIMCORE-2554
INSERT INTO USER_RIGHT (ID, IDENTIFIER, DESCRIPTION, PARENTID, ISMASTERDATA, CREATIONDATE, LASTMODIFIED, UPDATEUSER, CREATEUSER) VALUES (140049, 'Product detail - Supplier Attributes Edit - Copy attributes', null, 141014, 1, sysdate, sysdate, 1, 1);
INSERT INTO USER_RIGHT (ID, IDENTIFIER, DESCRIPTION, PARENTID, ISMASTERDATA, CREATIONDATE, LASTMODIFIED, UPDATEUSER, CREATEUSER) VALUES (140143, 'Product detail - Category Relation Tab - Show quality', null, 141140, 1, sysdate, sysdate, 1, 1);
INSERT INTO USER_RIGHT (ID, IDENTIFIER, DESCRIPTION, PARENTID, ISMASTERDATA, CREATIONDATE, LASTMODIFIED, UPDATEUSER, CREATEUSER) VALUES (140144, 'Product detail - Category Relation Tab - Validate quality', null, 141140, 1, sysdate, sysdate, 1, 1);

INSERT INTO USER_ROLE_USER_RIGHT_REL select seq_basic_id.nextval, userrole, 140143, sysdate, sysdate, 1, 1 FROM USER_ROLE_USER_RIGHT_REL WHERE USERRIGHT = 141140;
INSERT INTO USER_ROLE_USER_RIGHT_REL select seq_basic_id.nextval, userrole, 140144, sysdate, sysdate, 1, 1 FROM USER_ROLE_USER_RIGHT_REL WHERE USERRIGHT = 141140;

-- PIMCORE-2528
INSERT INTO USER_RIGHT (ID, IDENTIFIER, DESCRIPTION, CREATIONDATE, LASTMODIFIED, UPDATEUSER, CREATEUSER, PARENTID, ISMASTERDATA) VALUES (261000, 'Category source based mapping', null, sysdate, sysdate, 1, 1, 260000, 1);
INSERT INTO USER_RIGHT (ID, IDENTIFIER, DESCRIPTION, CREATIONDATE, LASTMODIFIED, UPDATEUSER, CREATEUSER, PARENTID, ISMASTERDATA) VALUES (261001, 'Category source based mapping - Button Search target', null, sysdate, sysdate, 1, 1, 261000, 1);
INSERT INTO USER_RIGHT (ID, IDENTIFIER, DESCRIPTION, CREATIONDATE, LASTMODIFIED, UPDATEUSER, CREATEUSER, PARENTID, ISMASTERDATA) VALUES (261002, 'Category source based mapping - Select target', null, sysdate, sysdate, 1, 1, 261000, 1);
INSERT INTO USER_RIGHT (ID, IDENTIFIER, DESCRIPTION, CREATIONDATE, LASTMODIFIED, UPDATEUSER, CREATEUSER, PARENTID, ISMASTERDATA) VALUES (261003, 'Category source based mapping - Button Search source', null, sysdate, sysdate, 1, 1, 261000, 1);
INSERT INTO USER_RIGHT (ID, IDENTIFIER, DESCRIPTION, CREATIONDATE, LASTMODIFIED, UPDATEUSER, CREATEUSER, PARENTID, ISMASTERDATA) VALUES (261004, 'Category source based mapping - Button Copy node attribute relations', null, sysdate, sysdate, 1, 1, 261000, 1);
INSERT INTO USER_RIGHT (ID, IDENTIFIER, DESCRIPTION, CREATIONDATE, LASTMODIFIED, UPDATEUSER, CREATEUSER, PARENTID, ISMASTERDATA) VALUES (261005, 'Category source based mapping - Add mapping filter', null, sysdate, sysdate, 1, 1, 261000, 1);
INSERT INTO USER_RIGHT (ID, IDENTIFIER, DESCRIPTION, CREATIONDATE, LASTMODIFIED, UPDATEUSER, CREATEUSER, PARENTID, ISMASTERDATA) VALUES (261006, 'Category source based mapping - Remove mapping filter', null, sysdate, sysdate, 1, 1, 261000, 1);

INSERT INTO USER_RIGHT (ID, IDENTIFIER, DESCRIPTION, CREATIONDATE, LASTMODIFIED, UPDATEUSER, CREATEUSER, PARENTID, ISMASTERDATA) VALUES (262000, 'Category target based mapping', null, sysdate, sysdate, 1, 1, 260000, 1);
INSERT INTO USER_RIGHT (ID, IDENTIFIER, DESCRIPTION, CREATIONDATE, LASTMODIFIED, UPDATEUSER, CREATEUSER, PARENTID, ISMASTERDATA) VALUES (262001, 'Category target based mapping - Button Search target', null, sysdate, sysdate, 1, 1, 262000, 1);
INSERT INTO USER_RIGHT (ID, IDENTIFIER, DESCRIPTION, CREATIONDATE, LASTMODIFIED, UPDATEUSER, CREATEUSER, PARENTID, ISMASTERDATA) VALUES (262002, 'Category target based mapping - Select target', null, sysdate, sysdate, 1, 1, 262000, 1);
INSERT INTO USER_RIGHT (ID, IDENTIFIER, DESCRIPTION, CREATIONDATE, LASTMODIFIED, UPDATEUSER, CREATEUSER, PARENTID, ISMASTERDATA) VALUES (262003, 'Category target based mapping - Button Search source', null, sysdate, sysdate, 1, 1, 262000, 1);
INSERT INTO USER_RIGHT (ID, IDENTIFIER, DESCRIPTION, CREATIONDATE, LASTMODIFIED, UPDATEUSER, CREATEUSER, PARENTID, ISMASTERDATA) VALUES (262004, 'Category target based mapping - Add mapping filter', null, sysdate, sysdate, 1, 1, 262000, 1);
INSERT INTO USER_RIGHT (ID, IDENTIFIER, DESCRIPTION, CREATIONDATE, LASTMODIFIED, UPDATEUSER, CREATEUSER, PARENTID, ISMASTERDATA) VALUES (262005, 'Category target based mapping - Remove mapping filter', null, sysdate, sysdate, 1, 1, 262000, 1);

insert into user_role_user_right_rel select seq_basic_id.nextval, userrole, 261000, sysdate, sysdate, 1, 1 from user_role_user_right_rel where userright = 260000;
update user_role_user_right_rel set USERRIGHT = 261001 where USERRIGHT = 260001;
update user_role_user_right_rel set USERRIGHT = 261002 where USERRIGHT = 260002;
update user_role_user_right_rel set USERRIGHT = 261003 where USERRIGHT = 260003;
update user_role_user_right_rel set USERRIGHT = 261004 where USERRIGHT = 260005;
update user_role_user_right_rel set USERRIGHT = 261005 where USERRIGHT = 260006;
update user_role_user_right_rel set USERRIGHT = 261006 where USERRIGHT = 260007;
delete from user_right where id in (260001, 260002, 260003, 260005, 260006, 260007);

-- PIMCORE-2431
INSERT INTO USER_RIGHT (ID, IDENTIFIER, DESCRIPTION, PARENTID, ISMASTERDATA, CREATIONDATE, LASTMODIFIED, UPDATEUSER, CREATEUSER) VALUES (140161, 'Product detail - Dimension Tab Edit - Add dimension', null, 141160, 1, sysdate, sysdate, 1, 1);
INSERT INTO USER_RIGHT (ID, IDENTIFIER, DESCRIPTION, PARENTID, ISMASTERDATA, CREATIONDATE, LASTMODIFIED, UPDATEUSER, CREATEUSER) VALUES (140162, 'Product detail - Dimension Tab Edit - Delete dimensions', null, 141160, 1, sysdate, sysdate, 1, 1);

ALTER TABLE ARTICLE_DIMENSION ADD CLIENT NUMBER(19);

UPDATE ARTICLE_DIMENSION AD SET AD.CLIENT = (SELECT CLIENT FROM ARTICLE WHERE ID = AD.PARENTARTICLE) WHERE AD.CLIENT IS NULL;
ALTER TABLE ARTICLE_DIMENSION MODIFY CLIENT NOT NULL;

ALTER TABLE ARTICLE_DIMENSION ADD CONSTRAINT UC_ART_DIM UNIQUE (PARENTARTICLE, CLIENT, DIMENSION);
ALTER TABLE ARTICLE_DIMENSION ADD CONSTRAINT FK_ART_DIM_CL FOREIGN KEY (CLIENT) REFERENCES CLIENT(ID);

-- PIMCORE-2577
INSERT INTO PLUGIN (ID, IDENTIFIER, DESCRIPTION, ENABLED, CONFIGURED, PREFIX, HASCONFIGAPP, CONFIGAPP, CREATIONDATE, LASTMODIFIED, UPDATEUSER, CREATEUSER) VALUES (19, 'MissingCategoryAttributes', 10018, 0, 0, null, 0, null, sysdate, sysdate, 1, 1);
INSERT INTO locale_lookuptext (ID, LOCALE, TEXTID, TEXT, CREATIONDATE, LASTMODIFIED, UPDATEUSER, CREATEUSER) VALUES (10018, 2, 10018, 'Fehlende Kategorieattribute Plugin', sysdate, sysdate, 1, 1);
INSERT INTO locale_lookuptext (ID, LOCALE, TEXTID, TEXT, CREATIONDATE, LASTMODIFIED, UPDATEUSER, CREATEUSER) VALUES (10518, 1, 10018, 'Missing category attributes plugin', sysdate, sysdate, 1, 1);

-- PIMCORE-2529
ALTER TABLE JOB ADD DOWNTIMEDAYS VARCHAR2(60 CHAR);

-- ID
UPDATE SERVER_PROPERTY SET PROPERTYVALUE='v4.0.04', LASTMODIFIED=sysdate WHERE PROPERTYKEY='server.id';
